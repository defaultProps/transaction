webpackJsonp([0],{"3C/1":function(t,e,i){i("M6a0"),i("zQR9"),i("+tPU"),i("qCoq"),i("UvrK"),i("Xjd4"),i("bqnK"),t.exports=i("FeBl").Map},"4WTo":function(t,e,i){var s=i("NWt+");t.exports=function(t,e){var i=[];return s(t,!1,i.push,i,e),i}},"5lg3":function(t,e){},"7Doy":function(t,e,i){var s=i("EqjI"),n=i("7UMu"),o=i("dSzd")("species");t.exports=function(t){var e;return n(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!n(e.prototype)||(e=void 0),s(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},"8DTZ":function(t,e){},"9Bbf":function(t,e,i){"use strict";var s=i("kM2E");t.exports=function(t){s(s.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},"9C8M":function(t,e,i){"use strict";var s=i("evD5").f,n=i("Yobk"),o=i("xH/j"),l=i("+ZMJ"),a=i("2KxR"),r=i("NWt+"),c=i("vIB/"),u=i("EGZi"),d=i("bRrM"),p=i("+E39"),v=i("06OY").fastKey,g=i("LIJb"),f=p?"_s":"size",h=function(t,e){var i,s=v(e);if("F"!==s)return t._i[s];for(i=t._f;i;i=i.n)if(i.k==e)return i};t.exports={getConstructor:function(t,e,i,c){var u=t(function(t,s){a(t,u,e,"_i"),t._t=e,t._i=n(null),t._f=void 0,t._l=void 0,t[f]=0,void 0!=s&&r(s,i,t[c],t)});return o(u.prototype,{clear:function(){for(var t=g(this,e),i=t._i,s=t._f;s;s=s.n)s.r=!0,s.p&&(s.p=s.p.n=void 0),delete i[s.i];t._f=t._l=void 0,t[f]=0},delete:function(t){var i=g(this,e),s=h(i,t);if(s){var n=s.n,o=s.p;delete i._i[s.i],s.r=!0,o&&(o.n=n),n&&(n.p=o),i._f==s&&(i._f=n),i._l==s&&(i._l=o),i[f]--}return!!s},forEach:function(t){g(this,e);for(var i,s=l(t,arguments.length>1?arguments[1]:void 0,3);i=i?i.n:this._f;)for(s(i.v,i.k,this);i&&i.r;)i=i.p},has:function(t){return!!h(g(this,e),t)}}),p&&s(u.prototype,"size",{get:function(){return g(this,e)[f]}}),u},def:function(t,e,i){var s,n,o=h(t,e);return o?o.v=i:(t._l=o={i:n=v(e,!0),k:e,v:i,p:s=t._l,n:void 0,r:!1},t._f||(t._f=o),s&&(s.n=o),t[f]++,"F"!==n&&(t._i[n]=o)),t},getEntry:h,setStrong:function(t,e,i){c(t,e,function(t,i){this._t=g(t,e),this._k=i,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?u(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,u(1))},i?"entries":"values",!i,!0),d(e)}}},ALrJ:function(t,e,i){var s=i("+ZMJ"),n=i("MU5D"),o=i("sB3e"),l=i("QRG4"),a=i("oeOm");t.exports=function(t,e){var i=1==t,r=2==t,c=3==t,u=4==t,d=6==t,p=5==t||d,v=e||a;return function(e,a,g){for(var f,h,m=o(e),b=n(m),y=s(a,g,3),_=l(b.length),k=0,C=i?v(e,_):r?v(e,0):void 0;_>k;k++)if((p||k in b)&&(h=y(f=b[k],k,m),t))if(i)C[k]=h;else if(h)switch(t){case 3:return!0;case 5:return f;case 6:return k;case 2:C.push(f)}else if(u)return!1;return d?-1:c||u?u:C}}},An6h:function(t,e){},HpRW:function(t,e,i){"use strict";var s=i("kM2E"),n=i("lOnJ"),o=i("+ZMJ"),l=i("NWt+");t.exports=function(t){s(s.S,t,{from:function(t){var e,i,s,a,r=arguments[1];return n(this),(e=void 0!==r)&&n(r),void 0==t?new this:(i=[],e?(s=0,a=o(r,arguments[2],2),l(t,!1,function(t){i.push(a(t,s++))})):l(t,!1,i.push,i),new this(i))}})}},LIJb:function(t,e,i){var s=i("EqjI");t.exports=function(t,e){if(!s(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},NVEF:function(t,e){},Tm1h:function(t,e){},UvrK:function(t,e,i){var s=i("kM2E");s(s.P+s.R,"Map",{toJSON:i("m9gC")("Map")})},Xjd4:function(t,e,i){i("9Bbf")("Map")},aA6X:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("mvHQ"),n=i.n(s),o=i("ifoU"),l=i.n(o),a=[{name:"大块文章",link:"article",color:"#598ed4",icon:""},{name:"日常学习",link:"study",color:"#598ed4",icon:""},{name:"繁忙工作",link:"story",color:"#5243aa",icon:""},{name:"旅游指南",link:"dashboard",color:"#598ed4",icon:""},{name:"开源项目",link:"existence",color:"#5243aa",icon:""},{name:"健身运动",link:"Sketch",color:"#ffab00",icon:""},{name:"厨房日记",link:"check",color:"#598ed4",icon:""},{name:"宇宙探索",link:"universe",color:"#5243aa",icon:""},{name:"游戏人生",link:"games",color:"#598ed4",icon:""},{name:"绘画历程",link:"drawing",color:"#598ed4",icon:""},{name:"人生思考",link:"think",color:"#598ed4",icon:""},{name:"情感心事",link:"emotion",color:"#598ed4",icon:""},{name:"其他",link:"other",color:"#598ed4",icon:""}],r=[{label:"不紧急",options:[{value:"ignore",label:"1",color:"#67C23A",icon:"icon-1_square"},{value:"delay",label:"2",color:"#67C23A",icon:"icon-2_square"}]},{label:"一般",options:[{value:"glance",label:"3",color:"#E6A23C",icon:"icon-3_square"},{value:"lookup",label:"4",color:"#E6A23C",icon:"icon-4_square"}]},{label:"紧急",options:[{value:"gaze",color:"#F56C6C",label:"5",icon:"icon-5_square"},{value:"urgent",label:"6",color:"#F56C6C",icon:"icon-6_square"}]}],c=[{icon:"icon-shujuzhongjian",color:"#0065ff",label:"工作",value:"work",moreIcon:["icon-gongzuo","icon-code","icon-all-fill","icon-all","icon-auto","icon-raw","icon-discounts-fill","icon-tuishui"]},{icon:"icon-shenghuo",color:"#E6A23C",label:"生活",value:"life",moreIcon:["icon-process","icon-waihuishuju","icon-read2","icon-pic-fill","icon-landtransportation"]}],u=[0,.5,1,2,3,4,5,6,7,8,9,10],d={data:function(){return{issusTypeArr:c,levelArr:r,currentworkIcon:"",currentLifeIcon:"",visibleType:!1,visibleLevel:!1,flagWorkIconIndex:0,flaglifeIconIndex:0}},created:function(){this.currentworkIcon=c[0].icon,this.currentLifeIcon=c[1].icon},methods:{selectIcon:function(t){"work"==t&&(this.flagWorkIconIndex>=c[0].moreIcon.length&&(this.flagWorkIconIndex=0),this.currentworkIcon=c[0].moreIcon[this.flagWorkIconIndex],this.flagWorkIconIndex++),"life"==t&&(this.flaglifeIconIndex>=c[1].moreIcon.length&&(this.flaglifeIconIndex=0),this.currentLifeIcon=c[1].moreIcon[this.flaglifeIconIndex],this.flaglifeIconIndex++)}}},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"sortSprint"}},[i("el-button",{directives:[{name:"popover",rawName:"v-popover:type",arg:"type"}],staticClass:"type",attrs:{size:"small",type:"text",icon:"el-icon-info"}}),t._v(" "),i("el-button",{directives:[{name:"popover",rawName:"v-popover:level",arg:"level"}],staticClass:"level",attrs:{size:"small",type:"text",icon:"el-icon-info"}}),t._v(" "),i("el-button",{directives:[{name:"popover",rawName:"v-popover:title",arg:"title"}],staticClass:"title",attrs:{size:"small",type:"text"}},[t._v("标题")]),t._v(" "),i("el-button",{directives:[{name:"popover",rawName:"v-popover:modules",arg:"modules"}],staticClass:"modules",attrs:{size:"small",type:"text"}},[t._v("模块")]),t._v(" "),i("el-button",{directives:[{name:"popover",rawName:"v-popover:status",arg:"status"}],staticClass:"status",attrs:{size:"small",type:"text",icon:"el-icon-sort-down el-icon--right"},on:{click:function(e){return t.$emit("sortable","executiveMode")}}},[t._v("状态")]),t._v(" "),i("el-popover",{ref:"type",attrs:{placement:"bottom"},model:{value:t.visibleType,callback:function(e){t.visibleType=e},expression:"visibleType"}},[i("div",{attrs:{id:"sortSprintMain"}},[i("div",{staticClass:"work"},[i("el-button",{attrs:{type:"text"}},[t._v("工作:")]),t._v(" "),i("el-button",{staticClass:"currentIcon",attrs:{size:"small",type:"text"}},[i("i",{class:[t.currentworkIcon,"iconfont"],style:{color:t.issusTypeArr[0].color}})])],1),t._v(" "),i("div",{staticClass:"life"},[i("el-button",{attrs:{type:"text"}},[t._v("生活:")]),t._v(" "),i("el-button",{staticClass:"currentIcon",attrs:{size:"small",type:"text"}},[i("i",{class:[t.currentLifeIcon,"iconfont"],style:{color:t.issusTypeArr[1].color}})])],1)])]),t._v(" "),i("el-popover",{ref:"level",attrs:{placement:"bottom",width:"160"},model:{value:t.visibleLevel,callback:function(e){t.visibleLevel=e},expression:"visibleLevel"}},[i("div",{attrs:{id:"sortSprintMain"}},t._l(t.levelArr,function(e,s){return i("div",{key:s,staticClass:"work"},[i("el-button",{attrs:{type:"text"}},[t._v(t._s(e.label)+":")]),t._v(" "),i("el-button",{staticClass:"currentIcon",attrs:{size:"small",type:"text"}},t._l(e.options,function(t,e){return i("i",{key:e,class:[t.icon,"iconfont"],style:{color:t.color}})}),0)],1)}),0)])],1)},staticRenderFns:[]};var v=i("VU/8")(d,p,!1,function(t){i("An6h")},null,null).exports,g=i("NYxO"),f={props:{issueList:{type:Array,default:function(){return[]}},activeSprintListLoading:[Boolean],sprintType:[String],dropObj:{type:Object,default:null},loading:[Boolean],group:[String,Object]},inject:{modulesList:{type:Array,default:function(){return[]}},highlightSelectedList:{type:Function,default:function(){}}},data:function(){return{visibleeditoSprintTitle:!1,visibleContextMenu:!1,levelArr:r,issusTypeArr:c,draggbleList:[],selectKey:"",oldIndex:-1,contextMenuTargets:[]}},computed:Object(g.b)({moduleList:function(t){return t.story.moduleList},progressStateList:function(t){return t.story.progressStateList},dragOptions:function(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost"}}}),components:{"uxo-sortSprint":v},watch:{issueList:"initData",dropObj:{handler:function(t){t&&this.oldIndex>=0&&this.handleUpdateSprintModuleState(t)},immediate:!0}},filters:{filterprogressState:function(t){return new l.a([["doing","处理中"],["not-start","未开始"],["finish","已完成"]]).get(t)}},created:function(){this.initData(this.issueList)},methods:{handleUpdateSprintModuleState:function(t){var e=this.draggbleList[this.oldIndex].moduleState;if("progressState"===t.type){if("activeSprint"===this.group)"close"===t.link?"finish"===e.link?this.closeActiveSprintIssue(this.draggbleList[this.oldIndex].guid):this.$notify.info({title:"提示",showClose:!1,message:"未完成的Issue不能拖动到关闭"}):this.updateSptintmoduleState({type:t.type,link:t.guid,name:t.name,issueLink:this.draggbleList[this.oldIndex].guid},"progressState",t.link);else if("backlog"===this.$store.state.story.sprintType)return this.$notify.warning({title:"提示",message:"Backlog中Issue不能设置执行状态",size:"mini",showClose:!1}),!1}else"module"===t.type&&this.updateSptintmoduleState({type:t.type,link:t.guid,name:t.name,issueLink:this.draggbleList[this.oldIndex].guid},"module")},updateSptintmoduleState:function(t,e,i){var s=this;this.$axios.sprints.updateSptintmoduleState(t).then(function(n){if(n.hasUpdateSptintmoduleState){var o=s.draggbleList.find(function(e){return e.guid===t.issueLink});o&&("progressState"===e&&s.$set(o,"moduleState",{link:i,name:t.name,guid:t.link}),"module"===e&&s.$set(o,"tag",{name:t.name,guid:t.link}))}})},closeActiveSprintIssue:function(t){var e=this;this.$axios.sprints.closeActiveSprintIssue({link:t}).then(function(i){if(i.hasCloseActiveSprintIssue){var s=e.draggbleList.findIndex(function(e){return e.guid===t});e.draggbleList.splice(s,1),e.$notify.success({title:"提示",message:'已存入<a href="/closeStoryIssue">仓库</a>',dangerouslyUseHTMLString:!0,showClose:!1})}})},contextmenuFn:function(t){var e=this;t.path.forEach(function(t,i){i<4&&t.classList.contains("sprint-list")&&(e.selectKey=t.getAttribute("data-key"))});var i=[{label:"编辑",icon:"el-icon-edit",disabled:!1,onClick:function(){return e.editSprint()}},{label:"拖动到执行列表",icon:"el-icon-finished",disabled:!1,onClick:function(){return e.editSprint()}},{label:"执行状态",disabled:!1,children:this.progressStateList.map(function(t){return{label:t.name,value:t.link,onClick:function(){return e.handleClickimplement(t)}}})},{label:"模型状态",disabled:!1,customClass:"contextmenu-subMenu",children:this.moduleList.map(function(t){return{label:t.name,value:t.link,onClick:function(){return e.handleClickimplement(t)}}})}];"active"===this.sprintType&&(i=i.filter(function(t,e){return 1!==e})),this.highlightSelectedList(this.selectKey),this.$contextmenu({customClass:"contextmenuContainer",items:i,event:t,zIndex:3,minWidth:120})},editSprint:function(){this.visibleeditoSprintTitle=!this.visibleeditoSprintTitle},initData:function(t){var e=this;this.contextMenuTargets=[],this.draggbleList=JSON.parse(n()(t)),this.draggbleList.forEach(function(t){e.contextMenuTargets.push(document.querySelector([".item[data-key='"+t.guid+"']"]))})},handleClickimplement:function(t){var e=this;this.draggbleList.forEach(function(i,s){i.guid===e.selectKey&&(e.oldIndex=s,e.$emit("handleDetail",i,!1),e.handleUpdateSprintModuleState(t))})},sortable:function(){"executiveMode"==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"executiveMode")&&this.draggbleList.sort(function(t,e){return["not-start","doing","finish"].indexOf(t.moduleState.link)-["not-start","doing","finish"].indexOf(e.moduleState.link)})},handleDraggleList:function(t,e){this.$emit("handleDetail",t)},startDraggable:function(t){this.oldIndex=t.oldIndex,this.$store.commit("sprintType",this.sprintType)},endDraggable:function(t){this.$emit("endDraggable",t)},addDraggable:function(t){},stylelevelClass:function(t){var e=void 0;return this.levelArr.forEach(function(i){i.options.forEach(function(i){i.label==t&&(e=i.icon)})}),e},filterTypeIcon:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"work",e=this.issusTypeArr.find(function(e){return e.value===t});return e?e.icon:"icon-shujuzhongjian"},filterTypeColor:function(t){var e=this.issusTypeArr.find(function(e){return e.value===t});return e?e.color:"rgb(0, 101, 255)"}}},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"draggable-list"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.draggbleList.length&&"active"==t.sprintType,expression:"draggbleList.length && sprintType =='active'"}],staticClass:"sort-contain"},[i("uxo-sortSprint",{on:{sortable:t.sortable}})],1),t._v(" "),[i("uxo-draggable",t._b({staticClass:"backlog-list",attrs:{tag:"ul",draggable:".item","ghost-class":"ghost",group:t.group},on:{start:t.startDraggable,end:t.endDraggable,add:t.addDraggable},model:{value:t.draggbleList,callback:function(e){t.draggbleList=e},expression:"draggbleList"}},"uxo-draggable",t.dragOptions,!1),[i("transition-group",t._l(t.draggbleList,function(e,s){return i("li",{key:e.guid,staticClass:"item sprint-list",attrs:{"data-key":e.guid},on:{contextmenu:function(e){return e.preventDefault(),t.contextmenuFn(e)},click:function(i){return t.handleDraggleList(e,s)}}},[i("span",{staticClass:"type",class:[e.issueType]},[i("i",{staticClass:"iconfont",class:t.filterTypeIcon(e.issueType),style:{color:t.filterTypeColor(e.issueType)}})]),t._v(" "),i("span",{staticClass:"level"},[i("i",{staticClass:"iconfont",class:t.stylelevelClass(e.urgencyLevel)})]),t._v(" "),i("span",{staticClass:"title",attrs:{title:e.title}},[t._v(t._s(e.title))]),t._v(" "),e.tag?i("el-button",{staticClass:"modules-type",attrs:{type:"text",size:"medium"}},[t._v(t._s(e.tag.name))]):t._e(),t._v(" "),e.moduleState?i("el-button",{class:[e.moduleState.link,"info-status"],attrs:{type:"text",size:"medium"}},[t._v(t._s(e.moduleState.name))]):t._e()],1)}),0)],1)],t._v(" "),0===t.draggbleList.length?i("div",{staticClass:"no-draggleList"},[i("div",{staticClass:"no-info"},[t._v("暂无事务")])]):t._e()],2)},staticRenderFns:[]};var m=i("VU/8")(f,h,!1,function(t){i("NVEF")},null,null).exports,b=i("Dd8w"),y=i.n(b),_={props:{visibleDialogModule:Boolean},data:function(){return{issusTypeArr:c,levelArr:r,modulesList:a,pointsArr:u}},methods:{handleClose:function(t){this.$emit("closeVisibleDialogModule")}}},k={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.visibleDialogModule?i("div",{attrs:{id:"dialogNewIssus"}},[i("el-dialog",{attrs:{visible:t.visibleDialogModule,size:"mini",title:"模块设置","close-on-click-modal":!1,"append-to-body":!0,"before-close":t.handleClose,"show-close":!1,width:"40%"},on:{"update:visible":function(e){t.visibleDialogModule=e}}},[i("div",{staticClass:"module-container"}),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleClose}},[t._v("确 定")])],1)])],1):t._e()},staticRenderFns:[]};var C={data:function(){return{thusList:[],moduleList:[],progressStateList:[],loadingNav:!1,visibleProgressState:!0,visibleModule:!0,visiblenavgation:!0,visibleDialogModule:!1}},components:{"uxo-dialogNavigationModule":i("VU/8")(_,k,!1,function(t){i("sfGO")},null,null).exports},created:function(){this.getThusList(),this.getModuleList(),this.getProgressStateList()},methods:{getProgressStateList:function(){var t=this;this.$axios.sprints.getProgressStateList().then(function(e){var i=["not-start","doing","finish","close"],s=e.progressStateList.map(function(t){return y()({},t,{dropStatus:!1,type:"progressState"})})||[];s.sort(function(t,e){return i.indexOf(t.link)-i.indexOf(e.link)}),t.progressStateList=s,t.$store.commit("progressStateList",s),t.visibleProgressState=!0})},getModuleList:function(){var t=this;this.$axios.sprints.getModuleList().then(function(e){t.moduleList=e.moduleList.map(function(t){return y()({},t,{dropStatus:!1,type:"module"})})||[],t.$store.commit("moduleList",t.moduleList),t.visibleModule=!0})},closeVisibleDialogModule:function(){this.visibleDialogModule=!1},handleClickModuleDialog:function(){this.visibleDialogModule=!0},handleClickNavgationDialog:function(){},handlelinkClick:function(t){window.open(t)},getThusList:function(){var t=this;this.loadingNav=!0,this.$axios.thus.list().then(function(e){setTimeout(function(){t.thusList=e,t.loadingNav=!1},600)})},dragleave:function(t){this.$set(t,"dropStatus",!1)},dragover:function(t,e){e.dropStatus||this.$set(e,"dropStatus",!0)},drop:function(t){this.$set(t,"dropStatus",!1),this.$emit("dropDownStatus",t)}}},L={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"storyStatusNavtgation"}},[i("div",{staticClass:"nav-main"},[i("div",{staticClass:"module scroll-style-none"},[i("div",{staticClass:"module-title"},[t._v("\n        执行状态\n        "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.visibleProgressState=!t.visibleProgressState}}},[i("i",{class:[t.visibleProgressState?"el-icon-arrow-down":"el-icon-arrow-right"]})])],1),t._v(" "),i("ul",{directives:[{name:"show",rawName:"v-show",value:t.visibleProgressState,expression:"visibleProgressState"}],staticClass:"scroll-style-none"},t._l(t.progressStateList,function(e){return i("li",{key:e.guid,class:[e.dropStatus?"dropStatus":"",e.link],on:{dragleave:function(i){return t.dragleave(e)},dragover:function(i){return i.preventDefault(),t.dragover(i,e)},drop:function(i){return t.drop(e)}}},[i("span",{class:[e.link]},[t._v(t._s(e.name))])])}),0)]),t._v(" "),i("div",{staticClass:"module module-type scroll-style-none"},[i("div",{staticClass:"module-title"},[t._v("\n        模块类型\n        "),i("el-button-group",[i("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(e){return t.handleClickModuleDialog()}}}),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.visibleModule=!t.visibleModule}}},[i("i",{class:[t.visibleModule?"el-icon-arrow-down":"el-icon-arrow-right"]})])],1)],1),t._v(" "),i("ul",{directives:[{name:"show",rawName:"v-show",value:t.visibleModule,expression:"visibleModule"}],staticClass:"scroll-style-none module-ul"},t._l(t.moduleList,function(e){return i("li",{key:e.guid,class:{dropStatus:e.dropStatus},on:{dragleave:function(i){return t.dragleave(e)},dragover:function(i){return i.preventDefault(),t.dragover(i,e)},drop:function(i){return t.drop(e)}}},[i("span",[t._v(t._s(e.name))])])}),0)]),t._v(" "),i("div",{staticClass:"module navgation"},[i("div",{staticClass:"module-title"},[t._v("\n        附加链接\n        "),i("el-button-group",[i("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(e){return t.handleClickNavgationDialog()}}}),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.visiblenavgation=!t.visiblenavgation}}},[i("i",{class:[t.visiblenavgation?"el-icon-arrow-down":"el-icon-arrow-right"]})])],1)],1),t._v(" "),i("ul",{directives:[{name:"show",rawName:"v-show",value:t.visiblenavgation,expression:"visiblenavgation"}],staticClass:"scroll-style-none"},t._l(t.thusList,function(e){return i("li",{key:e.name,attrs:{title:e.name},on:{click:function(i){return t.handlelinkClick(e.link)}}},[i("i",{staticClass:"iconfont icon-fenxiang"}),t._v("\n            "+t._s(e.name)+"\n        ")])}),0)])]),t._v(" "),i("uxo-dialogNavigationModule",{attrs:{visibleDialogModule:t.visibleDialogModule},on:{closeVisibleDialogModule:t.closeVisibleDialogModule}})],1)},staticRenderFns:[]};var S=i("VU/8")(C,L,!1,function(t){i("bl8R")},"data-v-6bbc03f4",null).exports,x={data:function(){return{levelArr:r,pointsArr:u,loading:!0,hasDraggle:!1,sprintIssue:{name:"",link:"",type:"",level:"",title:"",fixed:"",progressState:"",tag:{name:"",link:""},points:""}}},watch:{sprintLink:function(t){t&&this.getsprintIssueDetail(t)}},props:{sprintLink:{type:String,default:""}},created:function(){this.getsprintIssueDetail(this.sprintLink)},mounted:function(){this.addDraggleEvent()},methods:{getsprintIssueDetail:function(t){var e=this;this.loading=!0,this.$axios.sprints.sprintIssueDetail({link:t}).then(function(t){e.loading=!1,t.issueDetail&&(e.sprintIssue=t.issueDetail)})},addDraggleEvent:function(){var t=document.getElementById("backlogDetailWrapper"),e=document.getElementById("sprintDetailWrapper"),i=document.getElementById("dragglePoint"),s=this;document.onmouseup=function(t){document.onmousemove=null,document.onmouseup=null},i.onmousedown=function(n){var o=n.clientX,l=window.innerWidth,a=t.offsetWidth,r=e.offsetWidth;document.onmousemove=function(i){s.$store.commit("hasDraggle",!0),n.target.setCapture&&n.target.setCapture();var c=i.clientX-o,u=(a+c)/l*100,d=(r-c)/l*100;u>46&&d>22&&(t.style.width=u+"%",e.style.width=d+"%")},document.onmouseup=function(){document.onmousemove=null,i.releaseCapture&&i.releaseCapture(),window.releaseEvents&&window.releaseEvents(Event.MOUSEMOVE|Event.MOUSEUP)}}},handleClickCloseDetailModule:function(){this.$store.commit("hasDraggle",!1),this.$emit("closeDetail")}}},w={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"sprint-detail"}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"scroll-style-none sprint-detail__container"},[i("div",{staticClass:"header"},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleClickCloseDetailModule()}}},[i("i",{staticClass:"iconfont icon-chenghao"})])],1),t._v(" "),i("uxo-edit",{staticClass:"title",attrs:{content:t.sprintIssue.title,guid:t.sprintIssue.guid}}),t._v(" "),i("div",{staticClass:"form-item item-top"},[i("div",{staticClass:"form-label"},[t._v("\n        紧急度\n        "),i("el-tooltip",{attrs:{content:"此issue处理的紧急程度，由低到高数字递增",placement:"top"}},[i("i",{staticClass:"el-icon-info"})])],1),t._v(" "),i("el-select",{staticClass:"select-level",attrs:{placeholder:"请选择",size:"mini"},model:{value:t.sprintIssue.urgencyLevel,callback:function(e){t.$set(t.sprintIssue,"urgencyLevel",e)},expression:"sprintIssue.urgencyLevel"}},t._l(t.levelArr,function(e){return i("el-option-group",{key:e.label,attrs:{label:e.label}},t._l(e.options,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}},[i("span",{class:[t.icon,"iconfont"],style:{color:t.color+" !important"}})])}),1)}),1)],1),t._v(" "),i("div",{staticClass:"form-item"},[i("div",{staticClass:"form-label"},[t._v("创建时间")]),t._v(" "),i("div",{staticClass:"form-value"},[t._v(t._s(t.sprintIssue.createTime))])]),t._v(" "),i("div",{staticClass:"form-item"},[i("div",{staticClass:"form-label"},[t._v("最近更新")]),t._v(" "),i("div",{staticClass:"form-value"},[t._v(t._s(t.sprintIssue.updateTime))])]),t._v(" "),i("div",{staticClass:"form-item desc"},[i("div",{staticClass:"form-label"},[t._v("\n        描述\n        "),i("el-tooltip",{attrs:{content:"此issue的详情描述信息",placement:"top"}},[i("i",{staticClass:"el-icon-info"})])],1),t._v(" "),i("uxo-edit",{staticClass:"form-value",attrs:{content:t.sprintIssue.issueDesc,uid:t.sprintIssue.guid,textType:"textarea"}})],1),t._v(" "),i("div",{staticClass:"form-item remark"},[i("div",{staticClass:"form-label"},[t._v("\n        备注\n        "),i("el-tooltip",{attrs:{content:"此issue的备注信息",placement:"top"}},[i("i",{staticClass:"el-icon-info"})])],1),t._v(" "),i("uxo-edit",{staticClass:"form-value",attrs:{content:t.sprintIssue.issueRemark,uid:t.sprintIssue.guid,textType:"textarea"}})],1),t._v(" "),i("div",{staticClass:"form-item remark"},[i("div",{staticClass:"form-label"},[t._v("\n        相关链接\n        "),i("el-tooltip",{attrs:{content:"此issue的备注信息",placement:"top"}},[i("i",{staticClass:"el-icon-info"})])],1)])],1),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"dragglePoint"}},[e("i",{staticClass:"iconfont icon-tuodong"})])}]};var I=i("VU/8")(x,w,!1,function(t){i("Tm1h")},null,null).exports,D={data:function(){return{levelArr:r,pointsArr:u,rules:{name:[{message:"请输入标题",trigger:"blur"},{min:3,max:50,message:"长度在 3 到 50 个字符",trigger:"blur"}],moduleType:[{message:"请选择模块类型",trigger:"change"}]},issueForm:{moduleType:"",name:"",link:"",type:"",typeIcon:"",typeColor:"",level:"3",title:"",fixed:"",progressState:"",tag:{name:"",link:""}}}},props:{dialogTableVisible:Boolean},watch:{"issueForm.type":function(t){var e=this;this.issusTypeArr.forEach(function(i){i.value===t&&(e.issueForm.typeIcon=i.icon,e.issueForm.typeColor=i.color)})}},computed:Object(g.b)({moduleList:function(t){return t.story.moduleList},progressStateList:function(t){return t.story.progressStateList}}),methods:{handleClose:function(){this.$emit("handleClose")}}},M={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.dialogTableVisible?i("div",{attrs:{id:"dialogNewIssus"}},[i("el-dialog",{attrs:{visible:t.dialogTableVisible,size:"mini",top:"40px","custom-class":"dialogNewIssus","close-on-click-modal":!1,"before-close":t.handleClose,"show-close":!1,width:"50%"},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[i("h3",{staticClass:"newissue-title"},[t._v("问题详情")]),t._v(" "),i("el-form",{ref:"form",staticClass:"form",attrs:{model:t.issueForm,"label-width":"80px",rules:t.rules,size:"small"}},[i("el-form-item",{staticClass:"form-item",attrs:{label:"问题类型"}},[i("el-tooltip",{attrs:{content:"工作不全是生活，生活也不全是工作。",placement:"top"}},[i("i",{staticClass:"el-icon-info"})]),t._v(" "),i("el-select",{staticClass:"select-item",attrs:{placeholder:"请选择",size:"small"},model:{value:t.issueForm.type,callback:function(e){t.$set(t.issueForm,"type",e)},expression:"issueForm.type"}},t._l(t.progressStateList,function(e){return i("el-option",{key:e.name,attrs:{label:e.label,value:e.value}},[i("i",{staticClass:"iconfont",class:[e.icon],style:{color:e.color}}),t._v("\n            "+t._s(e.label)+"\n          ")])}),1),t._v(" "),i("div",{staticClass:"icon-prex"},[i("i",{staticClass:"iconfont",class:[t.issueForm.typeIcon],style:{color:t.issueForm.typeColor}})])],1),t._v(" "),i("el-form-item",{attrs:{label:"概要",prop:"name"}},[i("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入概要",size:"small",maxlength:"50","show-word-limit":""},model:{value:t.issueForm.name,callback:function(e){t.$set(t.issueForm,"name",e)},expression:"issueForm.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"模块类型",prop:"moduleType"}},[i("el-select",{staticClass:"select-item",attrs:{placeholder:"请选择",size:"small"},model:{value:t.issueForm.moduleType,callback:function(e){t.$set(t.issueForm,"moduleType",e)},expression:"issueForm.moduleType"}},t._l(t.moduleList,function(t){return i("el-option",{key:t.link,attrs:{label:t.name,value:t.name}})}),1)],1),t._v(" "),i("el-form-item",{attrs:{label:"紧急度",prop:"level"}},[i("el-select",{staticClass:"select-item",attrs:{placeholder:"请选择",size:"small"},model:{value:t.issueForm.level,callback:function(e){t.$set(t.issueForm,"level",e)},expression:"issueForm.level"}},t._l(t.levelArr,function(e){return i("el-option-group",{key:e.label,attrs:{label:e.label}},t._l(e.options,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}},[i("span",{staticStyle:{float:"left"}},[t._v(t._s(e.label))]),t._v(" "),i("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.value))])])}),1)}),1)],1),t._v(" "),i("el-form-item",{attrs:{label:"描述",prop:"desc"}},[i("el-input",{attrs:{type:"textarea",rows:5,placeholder:"此Issue的详细描述"},model:{value:t.issueForm.desc,callback:function(e){t.$set(t.issueForm,"desc",e)},expression:"issueForm.desc"}})],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){return t.handleClose()}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)],1)],1):t._e()},staticRenderFns:[]};var T={data:function(){return{visibleSprint:!0,dialogTableVisible:!1,activeSprintListLoading:!1,sprintData:[],selecType:null,backlogSprint:[],activeSprint:{issueList:[]},visibleNavigation:!0,backlogLoading:!1,sprintLoading:!1,activeCollapse:0,activeLightLink:"",affairVal:"",sprintLen:20,detailLen:0,sprintType:"",dropObj:null}},provide:function(){return{highlightSelectedList:this.highlightSelectedList}},components:{"uxo-storyStatusNavigation":S,"uxo-draggleList":m,"uxo-sprintDetail":I,"uxo-dialogNewIssus":i("VU/8")(D,M,!1,function(t){i("8DTZ")},null,null).exports},created:function(){this.getbacklogList(),this.getsprintList()},computed:Object(g.b)({hasDraggle:function(t){return t.story.hasDraggle}}),methods:{dropDownStatus:function(t){this.dropObj=t},handleClose:function(){this.dialogTableVisible=!1},endDraggable:function(t){var e=this;this.highlightSelectedList(this.activeLightLink),this.dropObj&&setTimeout(function(){e.dropObj=null},4e3)},dragleave:function(t){this.$set(t,"dropStatus",!1)},dragover:function(t,e){t.preventDefault(),this.$set(e,"dropStatus",!0)},closeDetail:function(){this.activeLightLink=null,this.highlightSelectedList(),this.renderlayout()},handleDetail:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.activeLightLink=t.guid,e&&this.renderlayout(),this.highlightSelectedList(this.activeLightLink)},handleClickvisibleNavigation:function(){this.visibleNavigation=!this.visibleNavigation,this.renderlayout()},renderlayout:function(){this.visibleNavigation?(this.sprintLen=this.activeLightLink?15:20,this.detailLen=20-this.sprintLen):(this.sprintLen=this.activeLightLink?18:24,this.detailLen=24-this.sprintLen),document.getElementById("backlogDetailWrapper").style.width=this.sprintLen/24*100+"%",document.getElementById("sprintDetailWrapper").style.width=Math.floor(this.detailLen/24*100)+"%"},highlightSelectedList:function(t){var e=document.querySelector('.item[data-key="'+t+'"]');document.querySelectorAll(".item[data-key]").forEach(function(t){t.classList.remove("light")}),t&&e&&(e.classList.add("light"),this.activeLightLink=t)},getsprintList:function(){var t=this;this.activeSprintListLoading=!0,this.$axios.sprints.activeSprintList({type:"sprint"}).then(function(e){t.activeSprintListLoading=!1,t.activeSprint=e})},getbacklogList:function(){var t=this;this.backlogLoading=!0,this.$axios.sprints.backlogSprintList({type:"backlog"}).then(function(e){t.backlogLoading=!1,t.backlogSprint=e.issueList})}}},E={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"moduleStory"}},[i("el-row",{staticClass:"story-backlog",attrs:{id:"storyBacklog"}},[i("el-col",{directives:[{name:"show",rawName:"v-show",value:t.visibleNavigation,expression:"visibleNavigation"}],staticClass:"storyNavigation",attrs:{span:4}},[i("uxo-storyStatusNavigation",{on:{dropDownStatus:t.dropDownStatus}})],1),t._v(" "),i("el-button",{staticClass:"triggernavgation",attrs:{size:"small"},on:{click:t.handleClickvisibleNavigation}},[i("i",{class:[t.visibleNavigation?"el-icon-d-arrow-left":"el-icon-d-arrow-right"]})]),t._v(" "),i("el-col",{class:[t.activeLightLink?"scroll-style-theme1":"scroll-style-none"],attrs:{span:t.sprintLen,id:"backlogDetailWrapper"}},[i("div",{staticClass:"backlog"},[i("div",{staticClass:"backlog-title"},[i("div",[i("span",{staticClass:"header-expander",class:{visibleSprint:t.visibleSprint},attrs:{size:"mini"},on:{click:function(e){t.visibleSprint=!t.visibleSprint}}},[i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"10"}},[i("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[i("path",{attrs:{d:"M3.29175 4.793c-.389.392-.389 1.027 0 1.419l2.939 2.965c.218.215.5.322.779.322s.556-.107.769-.322l2.93-2.955c.388-.392.388-1.027 0-1.419-.389-.392-1.018-.392-1.406 0l-2.298 2.317-2.307-2.327c-.194-.195-.449-.293-.703-.293-.255 0-.51.098-.703.293z",fill:"#344563"}})])])]),t._v(" "),i("span",{staticClass:"title"},[t._v(t._s(t.activeSprint.title))]),t._v(" "),i("span",{staticClass:"issus-count"},[t._v(t._s(t.activeSprint.issueList.length)+" 问题")])])]),t._v(" "),i("uxo-draggleList",{directives:[{name:"show",rawName:"v-show",value:t.visibleSprint,expression:"visibleSprint"}],attrs:{issueList:t.activeSprint.issueList,dropObj:t.dropObj,group:"activeSprint",sprintType:"active"},on:{endDraggable:t.endDraggable,handleDetail:t.handleDetail}})],1),t._v(" "),i("div",{staticClass:"space-between"},[t._v("waiting...")]),t._v(" "),i("div",{staticClass:"backlog"},[i("div",{staticClass:"backlog-title"},[i("div",[i("span",{staticClass:"title"},[t._v("Backlog")]),t._v(" "),i("span",{staticClass:"issus-count"},[t._v(t._s(t.backlogSprint.length)+" 问题")])]),t._v(" "),i("div",[i("el-button",{attrs:{size:"medium",icon:"el-icon-circle-plus",type:"primary"},on:{click:function(e){t.dialogTableVisible=!0}}},[t._v("新建Issue")])],1)]),t._v(" "),i("uxo-draggleList",{attrs:{handle:".handle",sprintType:"backlog",dropObj:t.dropObj,issueList:t.backlogSprint,group:{name:"activeSprint",pull:!1,put:!1}},on:{handleDetail:t.handleDetail,endDraggable:t.endDraggable}})],1)]),t._v(" "),i("el-col",{attrs:{id:"sprintDetailWrapper",span:t.detailLen}},[i("uxo-sprintDetail",{staticClass:"detail-container",attrs:{sprintLink:t.activeLightLink},on:{closeDetail:t.closeDetail}})],1)],1),t._v(" "),i("uxo-dialogNewIssus",{attrs:{dialogTableVisible:t.dialogTableVisible},on:{handleClose:t.handleClose}})],1)},staticRenderFns:[]};var N=i("VU/8")(T,E,!1,function(t){i("5lg3")},null,null);e.default=N.exports},bl8R:function(t,e){},bqnK:function(t,e,i){i("HpRW")("Map")},ifoU:function(t,e,i){t.exports={default:i("3C/1"),__esModule:!0}},m9gC:function(t,e,i){var s=i("RY/4"),n=i("4WTo");t.exports=function(t){return function(){if(s(this)!=t)throw TypeError(t+"#toJSON isn't generic");return n(this)}}},mvHQ:function(t,e,i){t.exports={default:i("qkKv"),__esModule:!0}},oeOm:function(t,e,i){var s=i("7Doy");t.exports=function(t,e){return new(s(t))(e)}},qCoq:function(t,e,i){"use strict";var s=i("9C8M"),n=i("LIJb");t.exports=i("qo66")("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=s.getEntry(n(this,"Map"),t);return e&&e.v},set:function(t,e){return s.def(n(this,"Map"),0===t?0:t,e)}},s,!0)},qkKv:function(t,e,i){var s=i("FeBl"),n=s.JSON||(s.JSON={stringify:JSON.stringify});t.exports=function(t){return n.stringify.apply(n,arguments)}},qo66:function(t,e,i){"use strict";var s=i("7KvD"),n=i("kM2E"),o=i("06OY"),l=i("S82l"),a=i("hJx8"),r=i("xH/j"),c=i("NWt+"),u=i("2KxR"),d=i("EqjI"),p=i("e6n0"),v=i("evD5").f,g=i("ALrJ")(0),f=i("+E39");t.exports=function(t,e,i,h,m,b){var y=s[t],_=y,k=m?"set":"add",C=_&&_.prototype,L={};return f&&"function"==typeof _&&(b||C.forEach&&!l(function(){(new _).entries().next()}))?(_=e(function(e,i){u(e,_,t,"_c"),e._c=new y,void 0!=i&&c(i,m,e[k],e)}),g("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in C&&(!b||"clear"!=t)&&a(_.prototype,t,function(i,s){if(u(this,_,t),!e&&b&&!d(i))return"get"==t&&void 0;var n=this._c[t](0===i?0:i,s);return e?this:n})}),b||v(_.prototype,"size",{get:function(){return this._c.size}})):(_=h.getConstructor(e,t,m,k),r(_.prototype,i),o.NEED=!0),p(_,t),L[t]=_,n(n.G+n.W+n.F,L),b||h.setStrong(_,t,m),_}},sfGO:function(t,e){}});
//# sourceMappingURL=0.3a94241d13d92bae65c3.js.map